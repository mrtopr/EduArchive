<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title id="pageTitle">Curriculum Details</title>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="assets/css/theme.css" />
  <link rel="stylesheet" href="assets/css/navbar.css" />
  <link rel="stylesheet" href="assets/css/footer.css" />
  <style>
    /* Base */
    body {
      font-family: "Inter", sans-serif;
      padding-top: 10px;
      background-color: var(--bg-main);
      color: var(--text-primary);
    }



    /* Main Content */
    .detail-container {
      padding: 40px;
      background-color: var(--bg-card);
      min-height: 100vh;
    }


    .resource-tabs .nav-link {
      color: var(--text-secondary);
      font-weight: 500;
      margin-right: 20px;
    }

    .resource-tabs .nav-link.active {
      color: var(--accent-purple);
      border-bottom: 2px solid var(--accent-purple);
      background-color: transparent;
    }

    .resource-tabs .nav-link:hover {
      border-bottom: 2px solid var(--border-soft);
    }

    .code-badge {
      background-color: var(--bg-muted);
      color: var(--text-secondary);
      padding: 3px 8px;
      border-radius: 4px;
      font-size: 0.8rem;
      margin-left: 10px;
    }

    /* PYQ Controls */
    .pyq-control-group {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }

        #subjectDescription {
            font-size: 1.1rem;
            color: var(--text-primary);
        }

        #notesContent {
            color: var(--text-secondary);
        }

        /* Ensure notes are readable in dark theme */
        [data-theme="dark"] #notesContent {
            color: var(--text-primary);
        }
    /* Responsive iframe */
    .responsive-iframe {
      width: 100%;
      height: 400px;
      border: 1px solid var(--border-soft);
      border-radius: 5px;
    }
  </style>

</head>

<body>
  <div id="navbar"></div>
  <script>
    fetch('./components/navbar.html')
      .then(res => res.text())
      .then(html => {
        document.getElementById('navbar').innerHTML = html;

      });
  </script>

  <div class="container detail-container">
    <p class="text-secondary mb-4">
      <a href="resources.html" class="text-decoration-none text-secondary">
        <i class="bi bi-arrow-left"></i> Back
      </a>
    </p>

    <div class="d-flex justify-content-between align-items-start mb-4">
      <div>
        <h1 class="fw-bold d-inline-block" id="subjectName">
          Loading Subject...
        </h1>
        <span class="code-badge" id="subjectCode">CODE</span>
      </div>
    </div>

    <p class="lead text-muted mb-4" id="subjectDescription">
      Loading description...
    </p>

    <ul class="nav resource-tabs mb-4 border-bottom" role="tablist">
      <li class="nav-item">
        <a class="nav-link active" data-bs-toggle="tab" href="#notes" role="tab"><i class="bi bi-journal-text me-2"></i>
          Notes</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-bs-toggle="tab" href="#pyq" role="tab"><i class="bi bi-file-text me-2"></i> PYQ
          Papers</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-bs-toggle="tab" href="#videos" role="tab"><i class="bi bi-camera-video me-2"></i> Video
          Lectures</a>
      </li>
    </ul>

    <div class="tab-content">
      <div class="tab-pane fade show active" id="notes" role="tabpanel">
        <h4 class="mb-3">Detailed Notes</h4>
        <div id="notesContent" class="text-muted">Loading notes...</div>
        <button type="button" class="btn btn-outline-info">
          Add data form here
        </button>
      </div>

      <div class="tab-pane fade" id="pyq" role="tabpanel">
                <div class="row">
                    <div class="col-md-5 mb-4">
                        <h5 class="mb-3">Mid-Semester Papers</h5>
                        <div class="pyq-control-group">
                            <select id="midSelect" onchange="updatePYQ('mid')" class="pyq-select">
                                <option value="">Select Paper...</option>
                            </select>
                            <button id="midPopBtn" class="btn btn-success">
                                <i class="bi bi-box-arrow-up-right"></i> Pop-out View
                            </button>
                        </div>
                        <iframe id="midIframe" class="responsive-iframe" allow="fullscreen"></iframe>
                    </div>

                    <div class="col-md-5 mb-4">
                        <h5 class="mb-3">End-Semester Papers</h5>
                        <div class="pyq-control-group">
                            <select id="endSelect" onchange="updatePYQ('end')" class="pyq-select">
                                <option value="">Select Paper...</option>
                            </select>
                            <button id="endPopBtn" class="btn btn-success">
                                <i class="bi bi-box-arrow-up-right"></i> Pop-out View
                            </button>
                        </div>
                        <iframe id="endIframe" class="responsive-iframe" allow="fullscreen"></iframe>
                    </div>
                </div>
            </div>


      <div class="tab-pane fade" id="videos" role="tabpanel">
        <p class="text-muted">Embedded video lectures or links go here for the current subject.</p>
        <button type="button" class="btn btn-outline-info">
          Add data form here
        </button>
      </div>
    </div>
  </div>

  <div id="footer"></div>

  <script>
    fetch('./components/footer.html')
      .then(res => res.text())
      .then(html => document.getElementById('footer').innerHTML = html);
  </script>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="./assets/js/theme.js"></script>
  <script src="./assets/js/layout.js"></script>
  <script>
    // Function to dynamically generate list items from a comma/dot separated string
    function formatNotes(notesString) {
      if (!notesString) return '<p>No detailed module notes available.</p>';

      const separators = /(M\d+:|Section \d+:|Module \d+:)/g;
      let parts = notesString.split(separators).filter(p => p.trim() !== '');

      if (parts.length > 1) {
        let html = '<ul>';
        for (let i = 0; i < parts.length; i += 2) {
          const header = parts[i];
          const content = parts[i + 1] ? parts[i + 1].trim() : '';
          html += `<li><strong>${header.trim()}</strong> ${content}</li>`;
        }
        html += '</ul>';
        return html;
      } else {
        const topics = notesString.split(/[\.|\;]\s*/).filter(t => t.trim() !== '');
        if (topics.length > 1) {
          return '<ul>' + topics.map(topic => `<li>${topic.trim()}</li>`).join('') + '</ul>';
        } else {
          return `<p>${notesString}</p>`;
        }
      }
    }

    document.addEventListener("DOMContentLoaded", function () {
      // --- Start of Consolidated subjectData ---
      const subjectData = {
        // --- Year 1 / Semester 1 & 2 (Common) ---
        'ME101': { name: "Workshop Practices", description: "Hands-on training in carpentry, fitting, and welding.", notes: "Module 1: Carpentry. Module 2: Fitting. Module 3: Welding." },
        'CS101': { name: "Intro to Programming (C)", description: "C language basics, control structures, arrays, functions, and pointers.", notes: "Module 1: C Language Basics. Module 2: Control Structures & Arrays. Module 3: Pointers and Functions." },
        'HS101': { name: "Communication Skill-I", description: "English grammar, vocabulary, and effective communication.", notes: "Module 1: Grammar and Vocabulary. Module 2: Verbal Communication. Module 3: Listening Skills." },
        'PH101': { name: "Physics", description: "Optics, mechanics, electromagnetism, and quantum physics.", notes: "Module 1: Optics and Waves. Module 2: Quantum Mechanics. Module 3: Electromagnetism." },
        'MA102': { name: "Math-II: Linear Algebra", description: "Matrices, vector calculus, and numerical methods.", notes: "Module 1: Matrices and Determinants. Module 2: Vector Calculus. Module 3: Numerical Methods." },
        'EC101': { name: "Basic Electronics Engineering", description: "Introduction to Diodes, transistors, logic gates, and operational amplifiers.", notes: "Module 1: Diodes and Transistors. Module 2: Logic Gates. Module 3: Operational Amplifiers." },
        'ME102': { name: "Engineering Graphics", description: "Drawing standards, projections, isometric views, and CAD basics.", notes: "Module 1: Projections. Module 2: Isometric Views. Module 3: AutoCAD Basics." },
        'ME103': { name: "Basic Mechanical Engineering", description: "Thermodynamics, fluid mechanics, and combustion engines.", notes: "Module 1: Thermodynamics Laws. Module 2: Fluid Mechanics. Module 3: IC Engines." },
        'CS102': { name: "Data Structure", description: "Arrays, Linked Lists, Stacks, Queues, and Trees.", notes: "Module 1: Linked Lists & Stacks. Module 2: Trees. Module 3: Hashing and Sorting." },
        'HS102': { name: "Communication Skill-II", description: "Business communication, technical writing, and professional presentations.", notes: "Module 1: Technical Report Writing. Module 2: Business Correspondence. Module 3: Presentations." },
        'CH101': { name: "Engineering Chemistry", description: "Fundamentals of chemical thermodynamics, kinetics, and organic chemistry. Molecular interactions, spectroscopy, and properties of materials.", notes: "Section 1: Chemical Thermodynamics. Section 2: Reaction Kinetics. Section 3: Organic Chemistry." },
        'MA101': { name: "Math-I: Calculus, ODE & Complex Analysis", description: "Differential equations, integral calculus, and complex analysis for system analysis.", notes: "Section 1: Differential Equations. Section 2: Complex Numbers. Section 3: Multi-variable Calculus." },

        // --- Year 2 / Semester 3 & 4 (Core) ---
        'MA201': { name: "Math-III: Probability & Statistics", description: "Probability theory, random variables, statistical distributions, estimation, and hypothesis testing.", notes: "M1: Basic Probability. M2: Sampling Distributions. M3: Hypothesis Testing." },
        'MA201_STOCH': { name: "Math-III: Stochastic Processes", description: "Probability spaces, random variables, stochastic processes.", notes: "M1: Probability Spaces. M2: Random Variables. M3: Stochastic Processes." },
        'HS201': { name: "Organizational Behaviour", description: "Motivation, leadership, team building, and conflict resolution.", notes: "M1: Motivation Theories. M2: Team Dynamics. M3: Leadership Styles." },
        'HS202': { name: "Communication Skill-III", description: "Advanced communication strategies, professional correspondence, and presentations.", notes: "M1: Advanced Writing. M2: Group Discussions. M3: Interview Preparation." },
        'CS201': { name: "Object Oriented Programming", description: "OOP concepts: classes, objects, inheritance, polymorphism in Java/C++.", notes: "M1: Classes and Objects. M2: Polymorphism & Inheritance. M3: Exception Handling." },
        'CS202': { name: "Design & Analysis of Algorithms", description: "Greedy, Dynamic Programming, Divide & Conquer, Graph Algorithms, and Big-O analysis.", notes: "M1: Big-O Analysis. M2: Graph Algorithms. M3: Dynamic Programming." },
        'CS203': { name: "Theory of Computation", description: "Finite Automata, Context-Free Grammars, Turing Machines, computability.", notes: "M1: Automata Theory. M2: Context-Free Grammars. M3: Turing Machines." },
        'CS204': { name: "Database Management System", description: "Relational concepts, SQL, normalization, data integrity.", notes: "M1: Relational Algebra. M2: Normalization. M3: SQL Queries." },
        'CS205': { name: "Computer Organization & Architecture", description: "Functional units, instruction sets, processor design, and memory.", notes: "M1: CPU Design. M2: Memory Hierarchy. M3: Pipelining." },
        'EC201': { name: "Microprocessor & Microcontroller", description: "8085/8086 architecture, assembly language, interfacing techniques, and 8051 controller.", notes: "M1: 8085 Architecture. M2: 8051 Programming. M3: Interfacing." },
        'EC203': { name: "Signals and Systems", description: "Continuous/discrete signals, Fourier series, Laplace and Z-Transform analysis.", notes: "M1: Signal Types. M2: Fourier Transform. M3: Z-Transform." },
        'EC204': { name: "Analog Electronics Circuit", description: "Transistor biasing, small-signal analysis, BJT/FET amplifiers, feedback, oscillators.", notes: "M1: Transistor Biasing. M2: Amplifiers. M3: Oscillators." },
        'EC205': { name: "Circuit Theory", description: "Network theorems, resonance, coupled circuits, transient response.", notes: "M1: Network Theorems. M2: Resonance. M3: Coupled Circuits." },
        'EC206': { name: "Digital Communication", description: "Pulse modulation, PCM, digital modulation, information theory.", notes: "M1: Modulation Techniques. M2: PCM and Quantization. M3: Information Theory." },
        'EE201': { name: "Electrical & Electronics Measurements", description: "Measurement principles, errors, analog/digital instruments, bridges.", notes: "M1: Measurement Principles. M2: Analog Instruments. M3: Bridges and Transducers." },
        'EE202': { name: "Electromagnetic Fields & Waves", description: "Vector analysis, Maxwell's equations, wave propagation, transmission lines.", notes: "M1: Maxwell's Equations. M2: Wave Propagation. M3: Transmission Lines." },
        'EE203': { name: "Network Theory", description: "Transient analysis, two-port networks, synthesis.", notes: "M1: Transient Analysis. M2: Network Theorems. M3: Two-Port Networks." },
        'EE204': { name: "Electrical Machine I", description: "DC generators, motors, transformers, three-phase systems.", notes: "M1: DC Machines. M2: Transformers. M3: Three-phase Systems." },
        'EC202': { name: "Digital Electronics Circuits", description: "Boolean logic, Karnaugh maps, combinational and sequential design.", notes: "M1: Logic Gates & Algebra. M2: Combinational Circuits. M3: Sequential Circuits." },
        'MA202': { name: "Math IV: Discrete Mathematics", description: "Logic, sets, relations, functions, graph theory for CS.", notes: "M1: Set Theory & Logic. M2: Relations and Functions. M3: Graph Theory." },
        'MA202_OPT': { name: "Math IV: Optimization Techniques", description: "Linear programming, numerical methods for engineering problems.", notes: "M1: Linear Programming. M2: Simplex Method. M3: Numerical Methods." },
        'CV201': { name: "Environmental Engineering & Safety", description: "Pollution control, waste management, industrial safety protocols.", notes: "M1: Pollution Control. M2: Waste Management. M3: Industrial Safety." },

        // --- Year 3 / Semester 5 & 6 (Advanced Core) ---
        'CS301': { name: "Compiler Design", description: "Lexical analysis, parsing, semantic analysis, code generation.", notes: "M1: Lexical Analysis. M2: Parsing Techniques. M3: Code Generation." },
        'CS302': { name: "Data Comm. & Networks", description: "Data encoding, routing algorithms, network security.", notes: "M1: Encoding and Protocols. M2: Routing Algorithms. M3: Network Security." },
        'CS303': { name: "Operating System", description: "Process management, memory management, file systems, concurrency.", notes: "M1: Process Management. M2: Memory Management. M3: File Systems." },
        'CS304': { name: "Computer Vision", description: "Image processing, feature extraction, object detection, pattern recognition.", notes: "M1: Image Processing. M2: Feature Extraction. M3: Object Detection." },
        'CS305': { name: "Model Checking", description: "Formal verification of software and hardware using model checking tools.", notes: "M1: Formal Verification. M2: Temporal Logic. M3: Model Checking Tools." },
        'CS306': { name: "Embedded Systems", description: "Microcontroller interfacing, RTOS, hardware-software co-design, embedded C.", notes: "M1: Microcontroller Interfacing. M2: RTOS Concepts. M3: Embedded C Programming." },
        'CS307': { name: "Advanced Software Engineering", description: "Agile methodologies, software metrics, Quality Assurance (QA).", notes: "M1: Agile and Scrum. M2: Software Metrics. M3: Quality Assurance." },
        'CS308': { name: "Data Mining", description: "Preprocessing, classification, clustering, association rules.", notes: "M1: Preprocessing & Classification. M2: Clustering & Association. M3: Data Warehousing." },
        'CS309': { name: "Artificial Intelligence", description: "Search algorithms, knowledge representation, ML basics.", notes: "M1: Search Algorithms. M2: Knowledge Representation. M3: Machine Learning Basics." },
        'CS310': { name: "Cloud Computing", description: "Cloud models, virtualization, cloud security.", notes: "M1: Cloud Models (IaaS, PaaS, SaaS). M2: Virtualization. M3: Cloud Security." },
        'CS311': { name: "Information Security", description: "Cryptography, network security, secure coding.", notes: "M1: Cryptography. M2: Network Security. M3: Secure Coding." },
        'IT301': { name: "Web Services & Distributed Systems", description: "SOA, SOAP, RESTful services, distributed computing.", notes: "M1: SOA and SOAP. M2: RESTful Services. M3: Distributed Computing Models." },
        'HS303': { name: "Principles of Management", description: "Planning, Organizing, Staffing, Directing, Controlling in business.", notes: "M1: Management Functions. M2: Planning and Organizing. M3: Direction and Control." },
        'EC301': { name: "Microwave Engineering", description: "Microwave tubes, waveguides, components, measurements.", notes: "M1: Microwave Tubes. M2: Waveguides. M3: Components and Measurements." },
        'EC302': { name: "Digital Signal Processing", description: "DFT, FFT, filter design, DSP processor architecture.", notes: "M1: DFT and FFT. M2: Filter Design. M3: DSP Processors." },
        'EC303': { name: "Communication Theory", description: "Analog/digital communication, noise analysis, modulation.", notes: "M1: Modulation Techniques. M2: Noise Analysis. M3: Digital Communication." },
        'EC304': { name: "Antenna Theory", description: "Antenna parameters, arrays, radio wave propagation.", notes: "M1: Antenna Parameters. M2: Antenna Arrays. M3: Radio Wave Propagation." },
        'EC305': { name: "Mobile Communication", description: "Cellular concepts, GSM, CDMA, wireless standards.", notes: "M1: Cellular Concepts. M2: GSM and CDMA. M3: Wireless Standards." },
        'EC306': { name: "VLSI Design", description: "MOSFETs, CMOS logic, layout design, VHDL/Verilog.", notes: "M1: MOSFET Fundamentals. M2: CMOS Logic. M3: VHDL/Verilog." },
        'EE301': { name: "Control Systems", description: "Mathematical modeling, time/frequency domain analysis, stability.", notes: "M1: System Modeling. M2: Time Domain Analysis. M3: Stability Criteria." },
        'EE302': { name: "Electrical Machines-II", description: "Synchronous machines, induction motors, special electrical machines.", notes: "M1: Synchronous Machines. M2: Induction Motors. M3: Special Machines." },
        'EE303': { name: "Power Transmission & Distribution", description: "Transmission line parameters, performance analysis, distribution systems.", notes: "M1: Transmission Line Parameters. M2: Performance Analysis. M3: Distribution Systems." },
        'EE304': { name: "Power Electronics", description: "Power devices, converters, inverters, drive control.", notes: "M1: Power Devices. M2: Converters and Inverters. M3: Drive Control." },
        'EE305': { name: "Power System Protection", description: "Relays, circuit breakers, protection schemes.", notes: "M1: Relays and CBs. M2: Protection Schemes. M3: System Grounding." },
        'HS301_EEE': { name: "Organizational Behaviour (EEE)", description: "Human behavior in organizational settings, focusing on motivation and team building.", notes: "M1: Human Factors. M2: Team Building. M3: Conflict Management." },
        'OE302_OPT': { name: "Optimization Engineering", description: "Mathematical optimization for engineering design and decisions.", notes: "M1: Linear Programming. M2: Nonlinear Optimization. M3: Application in Design." },

        // --- Year 4 / Semester 7 & 8 (Advanced & Final) ---
        'CS401': { name: "Software Engineering", description: "Advanced SDLC models, project management, maintenance.", notes: "M1: SDLC Models. M2: Project Management. M3: Software Maintenance." },
        'CS402': { name: "Machine Learning", description: "Supervised/unsupervised learning, neural networks, deep learning.", notes: "M1: Supervised Learning. M2: Unsupervised Learning. M3: Neural Networks." },
        'IT401': { name: "Blockchain Technology", description: "Cryptocurrencies, smart contracts, and decentralized applications.", notes: "M1: Cryptocurrencies. M2: Smart Contracts. M3: Decentralized Applications." },
        'HS401': { name: "Technical Writing", description: "Research papers, technical reports, documentation standards.", notes: "M1: Research Paper Structure. M2: Technical Report Layout. M3: Documentation Standards." },
        'HS402': { name: "Principle of Management", description: "Management principles for engineering professionals.", notes: "M1: Management Principles. M2: Leadership. M3: Decision Making." },
        'CS403': { name: "Real-Time Systems", description: "Real-time scheduling, reliability, fault tolerance.", notes: "M1: Real-Time Scheduling. M2: Reliability and Redundancy. M3: Fault Tolerance." },
        'EC401': { name: "Optical Communication", description: "Optical fibers, sources, detectors, network architecture.", notes: "M1: Optical Fibers. M2: Sources and Detectors. M3: Network Architecture." },
        'EE401': { name: "Power Systems Operation & Control", description: "Load flow analysis, AGC, power system stability.", notes: "M1: Load Flow. M2: Automatic Generation Control (AGC). M3: Power System Stability." },

        // --- Final Projects / Internship ---
        'PR401': { name: "Research Project / Internship", description: "Final year major project or industrial internship.", notes: "Focus on project planning, execution, and reporting." },

        // --- ELECTIVES (Unified Definitions) ---
        'PE201': { name: "PE-I: Professional Elective", description: "Specialized elective in the student's primary domain (Level 2).", notes: "Content varies based on chosen specialization." },
        'PE301': { name: "PE-I: Professional Elective", description: "Specialized elective in the student's primary domain (Level 3).", notes: "Content varies based on chosen specialization." },
        'PE302': { name: "PE-II: Professional Elective", description: "Advanced elective in specialized domain (Level 3).", notes: "Content varies based on chosen specialization." },
        'PE303': { name: "PE-III: Professional Elective", description: "Advanced elective tailored to career interests (Level 3).", notes: "Content varies based on chosen specialization." },
        'PE304': { name: "PE-IV: Professional Elective", description: "Advanced elective for specialized knowledge (Level 3).", notes: "Content varies based on chosen specialization." },
        'PE401': { name: "PE-V: Professional Elective", description: "Specialized elective in advanced technologies (Level 4).", notes: "Content varies based on chosen specialization." },
        'PE402': { name: "PE-VI/PE-VII: Professional Elective", description: "Advanced elective in emerging technologies (Level 4).", notes: "Content varies based on chosen specialization." },
        'OE301': { name: "OE-I: Open Elective", description: "Interdisciplinary elective from other domains (Level 3).", notes: "Content varies based on chosen external discipline." },
        'OE302': { name: "OE-II: Open Elective", description: "General elective from various disciplines (Level 3).", notes: "Content varies based on chosen external discipline." },
        'OE303': { name: "OE-III: Open Elective", description: "General elective choice (Level 3).", notes: "Content varies based on chosen external discipline." },
        'OE401': { name: "OE-IV: Open Elective", description: "Open elective from any engineering domain (Level 4).", notes: "Content varies based on chosen external discipline." },
        'OE402': { name: "OE-V: Open Elective", description: "Open elective choice (Level 4).", notes: "Content varies based on chosen external discipline." },
      };
      // --- End of Consolidated subjectData ---
      
            // --- START NEW PYQ LOGIC ---
            const CLOUD_NAME = "dgv2sm9iy";
            const BASE_URL = `https://res.cloudinary.com/${CLOUD_NAME}/image/upload/`;

            // Define your specific files here
            const subjectPYQs = {
                // --- Year 1 / Semester 1 & 2 (Common) ---
                ME101: [
                    {
                        type: "mid",
                        title: "Workshop Mid Term",
                        fileName: "wrk_mid_ab1c2d.pdf",
                    },
                    {
                        type: "end",
                        title: "Workshop End Term",
                        fileName: "wrk_end_ef3g4h.pdf",
                    },
                ],
                CS101: [
                    {
                        type: "mid",
                        title: "C Prog Mid Term",
                        fileName: "C_mid_x5ckya.pdf",
                    }, // Original
                    {
                        type: "end",
                        title: "C Prog End Term",
                        fileName: "C_end_wabyge.pdf",
                    }, // Original
                ],
                HS101: [
                    {
                        type: "mid",
                        title: "Comm-I Mid Term",
                        fileName: "cs_mid_kglck4.pdf",
                    },
                    {
                        type: "end",
                        title: "Comm-I End Term",
                        fileName: "cs_end_okgsy8.pdf",
                    },
                ],
                PH101: [
                    {
                        type: "mid",
                        title: "Physics Mid Term",
                        fileName: "phy_mid_qr9s0t.pdf",
                    },
                    {
                        type: "end",
                        title: "Physics End Term",
                        fileName: "physics_endsem_yjwip8.pdf",
                    },
                ],
                MA102: [
                    {
                        type: "mid",
                        title: "Math-II Mid Term",
                        fileName: "ma102_mid_yz3a4b.pdf",
                    },
                    {
                        type: "end",
                        title: "Math-II End Term",
                        fileName: "ma102_end_c5d6e7.pdf",
                    },
                ],
                EC101: [
                    {
                        type: "mid",
                        title: "Basic Elec Mid Term",
                        fileName: "ec101_mid_f8g9h0.pdf",
                    },
                    {
                        type: "end",
                        title: "Basic Elec End Term",
                        fileName: "ec101_end_i1j2k3.pdf",
                    },
                ],
                ME102: [
                    {
                        type: "mid",
                        title: "Engg Graph Mid Term",
                        fileName: "me102_mid_l4m5n6.pdf",
                    },
                    {
                        type: "end",
                        title: "Engg Graph End Term",
                        fileName: "me102_end_o7p8q9.pdf",
                    },
                ],
                ME103: [
                    {
                        type: "mid",
                        title: "Mechanical Mid",
                        fileName: "BME_mid_wrk7oj.pdf",
                    }, // Original
                    {
                        type: "end",
                        title: "Mechanical End",
                        fileName: "Bme_end_oefc5r.pdf",
                    }, // Original
                ],
                CS102: [
                    {
                        type: "mid",
                        title: "DS Mid Term",
                        fileName: "cs102_mid_r0s1t2.pdf",
                    },
                    {
                        type: "end",
                        title: "DS End Term",
                        fileName: "ds_end_beugvv.pdf",
                    },
                ],
                HS102: [
                    {
                        type: "mid",
                        title: "Comm-II Mid Term",
                        fileName: "hs102_mid_x6y7z8.pdf",
                    },
                    {
                        type: "end",
                        title: "Comm-II End Term",
                        fileName: "hs102_end_a9b0c1.pdf",
                    },
                ],
                CH101: [
                    {
                        type: "mid",
                        title: "Chemistry Mid Term",
                        fileName: "ch101_mid_d2e3f4.pdf",
                    },
                    {
                        type: "end",
                        title: "Chemistry End Term",
                        fileName: "Chemistry_end_mfjjqx.pdf",
                    },
                ],
                MA101: [
                    {
                        type: "mid",
                        title: "Maths1 Mid Term",
                        fileName: "Math1_mid_pt9qfy.pdf",
                    }, // Original
                    {
                        type: "end",
                        title: "Maths1 End Term",
                        fileName: "Math1end_vm1j58.pdf",
                    }, // Original
                ],

                // --- Year 2 / Semester 3 & 4 (Core) ---
                MA201: [
                    {
                        type: "mid",
                        title: "Prob & Stats Mid",
                        fileName: "ma201_mid_j8k9l0.pdf",
                    },
                    {
                        type: "end",
                        title: "Prob & Stats End",
                        fileName: "Maths_end_wog2s7.pdf",
                    },
                ],
                MA201_STOCH: [
                    {
                        type: "mid",
                        title: "Stoch Proc Mid",
                        fileName: "probability_Stochastic_mid_aqiyh6.pdf",
                    },
                    {
                        type: "end",
                        title: "Stoch Proc End",
                        fileName: "probability_Stochastic_end_vcb5xx.pdf",
                    },
                ],
                HS201: [
                    {
                        type: "mid",
                        title: "OB Mid Term",
                        fileName: "ob_mid_pn6amd.pdf",
                    },
                    {
                        type: "end",
                        title: "OB End Term",
                        fileName: "ob_end_tkjpac.pdf",
                    },
                ],
                HS202: [
                    {
                        type: "mid",
                        title: "Comm-III Mid Term",
                        fileName: "cs_mid_1_ce6kb7.pdf",
                    },
                    {
                        type: "end",
                        title: "Comm-III End Term",
                        fileName: "cs_end_1_oicifh.pdf",
                    },
                ],
                CS201: [
                    {
                        type: "mid",
                        title: "OOP Mid Term",
                        fileName: "oops_mid_w9gwbf.pdf",
                    },
                    {
                        type: "end",
                        title: "OOP End Term",
                        fileName: "oops_end_fvbdjk.pdf",
                    },
                ],
                CS202: [
                    {
                        type: "mid",
                        title: "DAA Mid Term",
                        fileName: "daa_mid_kzlcqs.pdf",
                    },
                    {
                        type: "end",
                        title: "DAA End Term",
                        fileName: "daa_end_chqzto.pdf",
                    },
                ],
                CS203: [
                    {
                        type: "mid",
                        title: "TOC Mid Term",
                        fileName: "cs203_mid_t4u5v6.pdf",
                    },
                    {
                        type: "end",
                        title: "TOC End Term",
                        fileName: "cs203_end_w7x8y9.pdf",
                    },
                ],
                CS204: [
                    {
                        type: "mid",
                        title: "DBMS Mid Term",
                        fileName: "cs204_mid_z0a1b2.pdf",
                    },
                    {
                        type: "end",
                        title: "DBMS End Term",
                        fileName: "cs204_end_c3d4e5.pdf",
                    },
                ],
                CS205: [
                    {
                        type: "mid",
                        title: "COA Mid Term",
                        fileName: "cs205_mid_f6g7h8.pdf",
                    },
                    {
                        type: "end",
                        title: "COA End Term",
                        fileName: "cs205_end_i9j0k1.pdf",
                    },
                ],
                EC201: [
                    {
                        type: "mid",
                        title: "MPMC Mid Term",
                        fileName: "mpmc_mid_smhnqu.pdf",
                    },
                    {
                        type: "end",
                        title: "MPMC End Term",
                        fileName: "mpmc_end_y7jh35.pdf",
                    },
                ],
                EC203: [
                    {
                        type: "mid",
                        title: "S&S Mid Term",
                        fileName: "signal_system_mid_cun98k.pdf",
                    },
                    {
                        type: "end",
                        title: "S&S End Term",
                        fileName: "ec203_end_u1v2w3.pdf",
                    },
                ],
                EC204: [
                    {
                        type: "mid",
                        title: "Analog Elec Mid",
                        fileName: "ec204_mid_x4y5z6.pdf",
                    },
                    {
                        type: "end",
                        title: "Analog Elec End",
                        fileName: "AEC_End_llgs2b.pdf",
                    },
                ],
                EC205: [
                    {
                        type: "mid",
                        title: "Circuit Theory Mid",
                        fileName: "ec205_mid_d0e1f2.pdf",
                    },
                    {
                        type: "end",
                        title: "Circuit Theory End",
                        fileName: "ec205_end_g3h4i5.pdf",
                    },
                ],
                EC206: [
                    {
                        type: "mid",
                        title: "Digital Comm Mid",
                        fileName: "ec206_mid_j6k7l8.pdf",
                    },
                    {
                        type: "end",
                        title: "Digital Comm End",
                        fileName: "ec206_end_m9n0o1.pdf",
                    },
                ],
                EE201: [
                    {
                        type: "mid",
                        title: "Elect. Meas. Mid",
                        fileName: "ee201_mid_p2q3r4.pdf",
                    },
                    {
                        type: "end",
                        title: "Elect. Meas. End",
                        fileName: "ee201_end_s5t6u7.pdf",
                    },
                ],
                EE202: [
                    {
                        type: "mid",
                        title: "EMF Mid Term",
                        fileName: "ee202_mid_v8w9x0.pdf",
                    },
                    {
                        type: "end",
                        title: "EMF End Term",
                        fileName: "ee202_end_y1z2a3.pdf",
                    },
                ],
                EE203: [
                    {
                        type: "mid",
                        title: "Network Th. Mid",
                        fileName: "ee203_mid_b4c5d6.pdf",
                    },
                    {
                        type: "end",
                        title: "Network Th. End",
                        fileName: "ee203_end_e7f8g9.pdf",
                    },
                ],
                EE204: [
                    {
                        type: "mid",
                        title: "Machine-I Mid Term",
                        fileName: "ee204_mid_h0i1j2.pdf",
                    },
                    {
                        type: "end",
                        title: "Machine-I End Term",
                        fileName: "ee204_end_k3l4m5.pdf",
                    },
                ],
                EC202: [
                    {
                        type: "mid",
                        title: "Digital Elec Mid",
                        fileName: "dec_mid_bvw7jh.pdf",
                    },
                    {
                        type: "end",
                        title: "Digital Elec End",
                        fileName: "dec_end_q583qk.pdf",
                    },
                ],
                MA202: [
                    {
                        type: "mid",
                        title: "Discrete Math Mid",
                        fileName: "ma202_mid_t2u3v4.pdf",
                    },
                    {
                        type: "end",
                        title: "Discrete Math End",
                        fileName: "ma202_end_w5x6y7.pdf",
                    },
                ],
                MA202_OPT: [
                    {
                        type: "mid",
                        title: "Optim. Tech Mid",
                        fileName: "ma202o_mid_z8a9b0.pdf",
                    },
                    {
                        type: "end",
                        title: "Optim. Tech End",
                        fileName: "ma202o_end_c1d2e3.pdf",
                    },
                ],
                CV201: [
                    {
                        type: "mid",
                        title: "Env. Engg. Mid",
                        fileName: "cv201_mid_f4g5h6.pdf",
                    },
                    {
                        type: "end",
                        title: "Env. Engg. End",
                        fileName: "cv201_end_i7j8k9.pdf",
                    },
                ],

                // --- Year 3 / Semester 5 & 6 (Advanced Core) ---
                CS301: [
                    {
                        type: "mid",
                        title: "Compiler Design Mid",
                        fileName: "cs301_mid_l0m1n2.pdf",
                    },
                    {
                        type: "end",
                        title: "Compiler Design End",
                        fileName: "cs301_end_o3p4q5.pdf",
                    },
                ],
                CS302: [
                    {
                        type: "mid",
                        title: "Networks Mid Term",
                        fileName: "cs302_mid_r6s7t8.pdf",
                    },
                    {
                        type: "end",
                        title: "Networks End Term",
                        fileName: "cs302_end_u9v0w1.pdf",
                    },
                ],
                CS303: [
                    {
                        type: "mid",
                        title: "OS Mid Term",
                        fileName: "cs303_mid_x2y3z4.pdf",
                    },
                    {
                        type: "end",
                        title: "OS End Term",
                        fileName: "cs303_end_a5b6c7.pdf",
                    },
                ],
                CS304: [
                    {
                        type: "mid",
                        title: "Comp. Vision Mid",
                        fileName: "cs304_mid_d8e9f0.pdf",
                    },
                    {
                        type: "end",
                        title: "Comp. Vision End",
                        fileName: "cs304_end_g1h2i3.pdf",
                    },
                ],
                CS305: [
                    {
                        type: "mid",
                        title: "Model Check Mid",
                        fileName: "cs305_mid_j4k5l6.pdf",
                    },
                    {
                        type: "end",
                        title: "Model Check End",
                        fileName: "cs305_end_m7n8o9.pdf",
                    },
                ],
                CS306: [
                    {
                        type: "mid",
                        title: "Embed. Sys. Mid",
                        fileName: "cs306_mid_p0q1r2.pdf",
                    },
                    {
                        type: "end",
                        title: "Embed. Sys. End",
                        fileName: "cs306_end_s3t4u5.pdf",
                    },
                ],
                CS307: [
                    {
                        type: "mid",
                        title: "Adv SE Mid Term",
                        fileName: "cs307_mid_v6w7x8.pdf",
                    },
                    {
                        type: "end",
                        title: "Adv SE End Term",
                        fileName: "cs307_end_y9z0a1.pdf",
                    },
                ],
                CS308: [
                    {
                        type: "mid",
                        title: "Data Mining Mid",
                        fileName: "cs308_mid_b2c3d4.pdf",
                    },
                    {
                        type: "end",
                        title: "Data Mining End",
                        fileName: "cs308_end_e5f6g7.pdf",
                    },
                ],
                CS309: [
                    {
                        type: "mid",
                        title: "AI Mid Term",
                        fileName: "cs309_mid_h8i9j0.pdf",
                    },
                    {
                        type: "end",
                        title: "AI End Term",
                        fileName: "cs309_end_k1l2m3.pdf",
                    },
                ],
                CS310: [
                    {
                        type: "mid",
                        title: "Cloud Comp Mid",
                        fileName: "cs310_mid_n4o5p6.pdf",
                    },
                    {
                        type: "end",
                        title: "Cloud Comp End",
                        fileName: "cs310_end_q7r8s9.pdf",
                    },
                ],
                CS311: [
                    {
                        type: "mid",
                        title: "Info Sec Mid",
                        fileName: "cs311_mid_t0u1v2.pdf",
                    },
                    {
                        type: "end",
                        title: "Info Sec End",
                        fileName: "cs311_end_w3x4y5.pdf",
                    },
                ],
                IT301: [
                    {
                        type: "mid",
                        title: "Web Serv. Mid",
                        fileName: "it301_mid_z6a7b8.pdf",
                    },
                    {
                        type: "end",
                        title: "Web Serv. End",
                        fileName: "it301_end_c9d0e1.pdf",
                    },
                ],
                HS303: [
                    {
                        type: "mid",
                        title: "POM Mid Term",
                        fileName: "hs303_mid_f2g3h4.pdf",
                    },
                    {
                        type: "end",
                        title: "POM End Term",
                        fileName: "hs303_end_i5j6k7.pdf",
                    },
                ],
                EC301: [
                    {
                        type: "mid",
                        title: "Microwave Mid",
                        fileName: "ec301_mid_l8m9n0.pdf",
                    },
                    {
                        type: "end",
                        title: "Microwave End",
                        fileName: "ec301_end_o1p2q3.pdf",
                    },
                ],
                EC302: [
                    {
                        type: "mid",
                        title: "DSP Mid Term",
                        fileName: "ec302_mid_r4s5t6.pdf",
                    },
                    {
                        type: "end",
                        title: "DSP End Term",
                        fileName: "ec302_end_u7v8w9.pdf",
                    },
                ],
                EC303: [
                    {
                        type: "mid",
                        title: "Comm Th. Mid",
                        fileName: "ec303_mid_x0y1z2.pdf",
                    },
                    {
                        type: "end",
                        title: "Comm Th. End",
                        fileName: "ec303_end_a3b4c5.pdf",
                    },
                ],
                EC304: [
                    {
                        type: "mid",
                        title: "Antenna Th. Mid",
                        fileName: "ec304_mid_d6e7f8.pdf",
                    },
                    {
                        type: "end",
                        title: "Antenna Th. End",
                        fileName: "ec304_end_g9h0i1.pdf",
                    },
                ],
                EC305: [
                    {
                        type: "mid",
                        title: "Mobile Comm Mid",
                        fileName: "ec305_mid_j2k3l4.pdf",
                    },
                    {
                        type: "end",
                        title: "Mobile Comm End",
                        fileName: "ec305_end_m5n6o7.pdf",
                    },
                ],
                EC306: [
                    {
                        type: "mid",
                        title: "VLSI Design Mid",
                        fileName: "ec306_mid_p8q9r0.pdf",
                    },
                    {
                        type: "end",
                        title: "VLSI Design End",
                        fileName: "ec306_end_s1t2u3.pdf",
                    },
                ],
                EE301: [
                    {
                        type: "mid",
                        title: "Control Sys Mid",
                        fileName: "ee301_mid_v4w5x6.pdf",
                    },
                    {
                        type: "end",
                        title: "Control Sys End",
                        fileName: "ee301_end_y7z8a9.pdf",
                    },
                ],
                EE302: [
                    {
                        type: "mid",
                        title: "Machine-II Mid",
                        fileName: "ee302_mid_b0c1d2.pdf",
                    },
                    {
                        type: "end",
                        title: "Machine-II End",
                        fileName: "ee302_end_e3f4g5.pdf",
                    },
                ],
                EE303: [
                    {
                        type: "mid",
                        title: "Pwr T&D Mid",
                        fileName: "ee303_mid_h6i7j8.pdf",
                    },
                    {
                        type: "end",
                        title: "Pwr T&D End",
                        fileName: "ee303_end_k9l0m1.pdf",
                    },
                ],
                EE304: [
                    {
                        type: "mid",
                        title: "Pwr Elec Mid Term",
                        fileName: "ee304_mid_n2o3p4.pdf",
                    },
                    {
                        type: "end",
                        title: "Pwr Elec End Term",
                        fileName: "ee304_end_q5r6s7.pdf",
                    },
                ],
                EE305: [
                    {
                        type: "mid",
                        title: "Pwr Sys Prot. Mid",
                        fileName: "ee305_mid_t8u9v0.pdf",
                    },
                    {
                        type: "end",
                        title: "Pwr Sys Prot. End",
                        fileName: "ee305_end_w1x2y3.pdf",
                    },
                ],
                HS301_EEE: [
                    {
                        type: "mid",
                        title: "OB-EEE Mid Term",
                        fileName: "hs301e_mid_z4a5b6.pdf",
                    },
                    {
                        type: "end",
                        title: "OB-EEE End Term",
                        fileName: "hs301e_end_c7d8e9.pdf",
                    },
                ],
                OE302_OPT: [
                    {
                        type: "mid",
                        title: "Optim Engg Mid",
                        fileName: "oe302o_mid_f0g1h2.pdf",
                    },
                    {
                        type: "end",
                        title: "Optim Engg End",
                        fileName: "oe302o_end_i3j4k5.pdf",
                    },
                ],

                // --- Year 4 / Semester 7 & 8 (Advanced & Final) ---
                CS401: [
                    {
                        type: "mid",
                        title: "Software Engg Mid",
                        fileName: "cs401_mid_l6m7n8.pdf",
                    },
                    {
                        type: "end",
                        title: "Software Engg End",
                        fileName: "cs401_end_o9p0q1.pdf",
                    },
                ],
                CS402: [
                    {
                        type: "mid",
                        title: "ML Mid Term",
                        fileName: "cs402_mid_r2s3t4.pdf",
                    },
                    {
                        type: "end",
                        title: "ML End Term",
                        fileName: "cs402_end_u5v6w7.pdf",
                    },
                ],
                IT401: [
                    {
                        type: "mid",
                        title: "Blockchain Mid",
                        fileName: "it401_mid_x8y9z0.pdf",
                    },
                    {
                        type: "end",
                        title: "Blockchain End",
                        fileName: "it401_end_a1b2c3.pdf",
                    },
                ],
                HS401: [
                    {
                        type: "mid",
                        title: "Tech Writing Mid",
                        fileName: "hs401_mid_d4e5f6.pdf",
                    },
                    {
                        type: "end",
                        title: "Tech Writing End",
                        fileName: "hs401_end_g7h8i9.pdf",
                    },
                ],
                HS402: [
                    {
                        type: "mid",
                        title: "POM-Engg Mid",
                        fileName: "hs402_mid_j0k1l2.pdf",
                    },
                    {
                        type: "end",
                        title: "POM-Engg End",
                        fileName: "hs402_end_m3n4o5.pdf",
                    },
                ],
                CS403: [
                    {
                        type: "mid",
                        title: "R-T Systems Mid",
                        fileName: "cs403_mid_p6q7r8.pdf",
                    },
                    {
                        type: "end",
                        title: "R-T Systems End",
                        fileName: "cs403_end_s9t0u1.pdf",
                    },
                ],
                EC401: [
                    {
                        type: "mid",
                        title: "Optical Comm Mid",
                        fileName: "ec401_mid_v2w3x4.pdf",
                    },
                    {
                        type: "end",
                        title: "Optical Comm End",
                        fileName: "ec401_end_y5z6a7.pdf",
                    },
                ],
                EE401: [
                    {
                        type: "mid",
                        title: "Pwr Sys Op. Mid",
                        fileName: "ee401_mid_b8c9d0.pdf",
                    },
                    {
                        type: "end",
                        title: "Pwr Sys Op. End",
                        fileName: "ee401_end_e1f2g3.pdf",
                    },
                ],

                // --- Final Projects / Internship ---
                PR401: [
                    {
                        type: "mid",
                        title: "Project Proposal",
                        fileName: "pr401_mid_h4i5j6.pdf",
                    },
                    {
                        type: "end",
                        title: "Project Report",
                        fileName: "pr401_end_k7l8m9.pdf",
                    },
                ],

                // --- ELECTIVES (Unified Definitions) ---
                PE201: [
                    {
                        type: "mid",
                        title: "PE-I Mid Term",
                        fileName: "pe201_mid_n0o1p2.pdf",
                    },
                    {
                        type: "end",
                        title: "PE-I End Term",
                        fileName: "pe201_end_q3r4s5.pdf",
                    },
                ],
                PE301: [
                    {
                        type: "mid",
                        title: "PE-I Mid Term",
                        fileName: "pe301_mid_t6u7v8.pdf",
                    },
                    {
                        type: "end",
                        title: "PE-I End Term",
                        fileName: "pe301_end_w9x0y1.pdf",
                    },
                ],
                PE302: [
                    {
                        type: "mid",
                        title: "PE-II Mid Term",
                        fileName: "pe302_mid_z2a3b4.pdf",
                    },
                    {
                        type: "end",
                        title: "PE-II End Term",
                        fileName: "pe302_end_c5d6e7.pdf",
                    },
                ],
                PE303: [
                    {
                        type: "mid",
                        title: "PE-III Mid Term",
                        fileName: "pe303_mid_f8g9h0.pdf",
                    },
                    {
                        type: "end",
                        title: "PE-III End Term",
                        fileName: "pe303_end_i1j2k3.pdf",
                    },
                ],
                PE304: [
                    {
                        type: "mid",
                        title: "PE-IV Mid Term",
                        fileName: "pe304_mid_l4m5n6.pdf",
                    },
                    {
                        type: "end",
                        title: "PE-IV End Term",
                        fileName: "pe304_end_o7p8q9.pdf",
                    },
                ],
                PE401: [
                    {
                        type: "mid",
                        title: "PE-V Mid Term",
                        fileName: "pe401_mid_r0s1t2.pdf",
                    },
                    {
                        type: "end",
                        title: "PE-V End Term",
                        fileName: "pe401_end_u3v4w5.pdf",
                    },
                ],
                PE402: [
                    {
                        type: "mid",
                        title: "PE-VI Mid Term",
                        fileName: "pe402_mid_x6y7z8.pdf",
                    },
                    {
                        type: "end",
                        title: "PE-VI End Term",
                        fileName: "pe402_end_a9b0c1.pdf",
                    },
                ],
                OE301: [
                    {
                        type: "mid",
                        title: "OE-I Mid Term",
                        fileName: "oe301_mid_d2e3f4.pdf",
                    },
                    {
                        type: "end",
                        title: "OE-I End Term",
                        fileName: "oe301_end_g5h6i7.pdf",
                    },
                ],
                OE302: [
                    {
                        type: "mid",
                        title: "OE-II Mid Term",
                        fileName: "oe302_mid_j8k9l0.pdf",
                    },
                    {
                        type: "end",
                        title: "OE-II End Term",
                        fileName: "oe302_end_m1n2o3.pdf",
                    },
                ],
                OE303: [
                    {
                        type: "mid",
                        title: "OE-III Mid Term",
                        fileName: "oe303_mid_p4q5r6.pdf",
                    },
                    {
                        type: "end",
                        title: "OE-III End Term",
                        fileName: "oe303_end_s7t8u9.pdf",
                    },
                ],
                OE401: [
                    {
                        type: "mid",
                        title: "OE-IV Mid Term",
                        fileName: "oe401_mid_v0w1x2.pdf",
                    },
                    {
                        type: "end",
                        title: "OE-IV End Term",
                        fileName: "oe401_end_y3z4a5.pdf",
                    },
                ],
                OE402: [
                    {
                        type: "mid",
                        title: "OE-V Mid Term",
                        fileName: "oe402_mid_b6c7d8.pdf",
                    },
                    {
                        type: "end",
                        title: "OE-V End Term",
                        fileName: "oe402_end_e9f0g1.pdf",
                    },
                ],
                DEFAULT: [
                    {
                        type: "mid",
                        title: "Sample Mid Term Paper (heavy sem)",
                        fileName: "FSj7CWJVsAE0KDB_d6becn.pdf",
                    },
                    {
                        type: "end",
                        title: "Sample End Term Paper (heavy sem)",
                        fileName: "FSj7CWJVsAE0KDB_d6becn.pdf",
                    },
                ],
            };
            // Helper to generate Full URL
            function getPDFLink(fileName) {
                return BASE_URL + fileName;
            }

            // Function 1: Populate Dropdowns
            function renderPYQs(courseId) {
                const midSelect = document.getElementById("midSelect");
                const endSelect = document.getElementById("endSelect");

                // Clear existing
                midSelect.innerHTML = "";
                endSelect.innerHTML = "";

                // Get papers or Default
                const papers = subjectPYQs[courseId] || subjectPYQs.DEFAULT;

                // Filter for Mid and End
                const midPapers = papers.filter((p) => p.type === "mid");
                const endPapers = papers.filter((p) => p.type === "end");

                // Add options to Mid Select
                midPapers.forEach((p) => {
                    let opt = document.createElement("option");
                    opt.value = p.fileName;
                    opt.textContent = p.title;
                    midSelect.appendChild(opt);
                });

                // Add options to End Select
                endPapers.forEach((p) => {
                    let opt = document.createElement("option");
                    opt.value = p.fileName;
                    opt.textContent = p.title;
                    endSelect.appendChild(opt);
                });

                // Trigger update to load the first option
                if (midPapers.length > 0) {
                    midSelect.value = midPapers[0].fileName;
                    updatePYQ("mid");
                }
                if (endPapers.length > 0) {
                    endSelect.value = endPapers[0].fileName;
                    updatePYQ("end");
                }
            }

            // Function 2: Update Iframe based on Dropdown
            // Attached to window so onclick works in HTML
            window.updatePYQ = function (type) {
                const select = document.getElementById(type + "Select");
                const iframe = document.getElementById(type + "Iframe");
                const btn = document.getElementById(type + "PopBtn");

                const fileName = select.value;
                if (fileName) {
                    const fullUrl = getPDFLink(fileName);
                    iframe.src = fullUrl;
                    btn.onclick = () => window.open(fullUrl, "_blank");
                }
            };

      async function fetchSubjectDetails(courseId) {
        await new Promise((resolve) => setTimeout(resolve, 50)); // Reduced delay
        if (subjectData[courseId]) {
          return { data: subjectData[courseId], courseId: courseId };
        }
        return null;
      }

      const urlParams = new URLSearchParams(window.location.search);
      const courseId = urlParams.get("course_id");

      // Find all elements to update
      const elPageTitle = document.getElementById("pageTitle");
      const elSubjectName = document.getElementById("subjectName");
      const elSubjectCode = document.getElementById("subjectCode");
      const elSubjectDescription = document.getElementById("subjectDescription");
      const elNotesContent = document.getElementById("notesContent");

      async function loadSubject() {
                if (!courseId) {
                    elSubjectName.textContent = "Invalid Request";
                    elSubjectDescription.textContent =
                        "Please specify a valid course ID in the URL. Example: ?course_id=CS302";
                    elSubjectCode.textContent = "ERR";
                    elNotesContent.innerHTML = "<p>No course ID provided.</p>";
                    renderPYQs("DEFAULT"); // Load defaults
                    return;
                }

                try {
                    const result = await fetchSubjectDetails(courseId);

                    if (result && result.data) {
                        elPageTitle.textContent = `${result.data.name} | EduArchive`;
                        elSubjectName.textContent = result.data.name;
                        elSubjectCode.textContent = result.courseId;
                        elSubjectDescription.textContent = result.data.description;
                        elNotesContent.textContent = result.data.notes;

                        // --- Call PYQ Renderer Here ---
                        renderPYQs(courseId);
                    } else {
                        elPageTitle.textContent = "Subject Not Found | EduArchive";
                        elSubjectName.textContent = "Subject Not Found";
                        elSubjectCode.textContent = courseId;
                        elSubjectDescription.textContent =
                            "The requested subject could not be found. Please check the URL.";
                        elNotesContent.textContent = "No notes available.";
                        renderPYQs("DEFAULT"); // Load defaults
                    }
                } catch (error) {
                    console.error("Error fetching subject data:", error);
                    elSubjectName.textContent = "Load Error";
                    elSubjectDescription.textContent =
                        "An error occurred while loading the data.";
                }
            }

      loadSubject();
    });
  </script>

  <!-- Initialize Search Functionality -->
  <script type="module">
    import { initializeSearch } from './assets/js/search.js';

    document.addEventListener('DOMContentLoaded', () => {
      initializeSearch();
    });
  </script>

</body>

</html>